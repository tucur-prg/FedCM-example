<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
     content="width=320,
        height=480,
        initial-scale=1.0,
        minimum-scale=1.0,
        maximum-scale=2.0,
        user-scalable=yes" />

  <title>FedCM</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
  <h2>FedCM</h2>
  <button onclick="fedcm();">認証</button>
  <hr>
  <div>FedCM: <span id="fedcm"></span></div>
</body>

<script>
function fedcm() {
  navigator.credentials.get({
    identity: {
      providers: [{
        configURL: "http://localhost:8080/config.json",
        clientId: "dummy9999",
        nonce: "456",
      }],
      mode: "permission"
    }
  })
  .then(console.log)
  .catch(console.log);
}
$(() => {
  document.getElementById('fedcm').innerHTML = (window.FederatedCredential || FederatedCredential.prototype.login) ? 'Support' : 'Unsupport';
});
</script>

</html>
